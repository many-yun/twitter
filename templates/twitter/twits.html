{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'style.css' %}">

<div class="twit-area">
    <form action="{% url 'twitter:twit_create' %}" method="post" class="twit-form">
        {% csrf_token %}
        <textarea name="content" id="content" rows="10" placeholder="내용을 입력해주세요."></textarea>
        <input type="submit" value="트윗하기">
    </form>
    {% if twits %}
    <ul class="twit-list">
        {% for twit in twits %}
        <li class="twit-box">
            {% if twit.parent %}
            <p class='parent-twit'>{{ twit.parent }}</p>
            {% endif %}
            <a href="{% url 'twitter:detail' twit.id %}">
                <p>
                    {% if twit.parent %}
                    <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M205 34.8c11.5 5.1 19 16.6 19 29.2v64H336c97.2 0 176 78.8 176 176c0 113.3-81.5 163.9-100.2 174.1c-2.5 1.4-5.3 1.9-8.1 1.9c-10.9 0-19.7-8.9-19.7-19.7c0-7.5 4.3-14.4 9.8-19.5c9.4-8.8 22.2-26.4 22.2-56.7c0-53-43-96-96-96H224v64c0 12.6-7.4 24.1-19 29.2s-25 3-34.4-5.4l-160-144C3.9 225.7 0 217.1 0 208s3.9-17.7 10.6-23.8l160-144c9.4-8.5 22.9-10.6 34.4-5.4z"/></svg>{% endif %}
                    {{ twit.content }}
                </p>
                <span>{{ twit.create_date }}</span>
            </a>
            <div class="twit-btns">
                <input type="button" class="reply-btn" value="답글"/>
                <input type="button" class="delete-btn" value="삭제"/>
            </div>
            <form action="{% url 'twitter:twit_create' %}" method="post" class="twit-form" style="display:none;">
                {% csrf_token %}
                <textarea name="content" id="reply-content" rows="10" placeholder="답글을 입력해주세요."></textarea>
                <input type="submit" value="답글하기">
            </form>
        </li>
        {% endfor %}
    </ul>
</div>
{% endif %}
<script>
    const replyBtn = document.getElementsByClassName("reply-btn")

    Array.from(replyBtn).forEach((e) => {
        e.addEventListener('click', () => {
            const replyForm = e.parentNode.nextElementSibling
            
            if(replyForm.style.display === "none"){
                replyForm.style.display = "block"
            }
            else replyForm.style.display = "none"
        })
    })
</script>